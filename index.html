<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>🍊 예측 실행</title>
    <style>
        body {
            font-family: "Segoe UI", sans-serif;
            padding: 40px;
        }
        h1 {
            font-size: 28px;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin-bottom: 6px;
        }
        .error {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>🍊 예측 실행</h1>
    <button onclick="fetchPrediction()">예측 실행</button>

    <h3>📁 예측 회차: <span id="round">불러오는 중...</span></h3>
    <h3>앞 기준 Top 5</h3>
    <ul id="result">
        <li>⏳ 데이터 불러오는 중...</li>
    </ul>

    <script>
        async function fetchPrediction() {
            const round = document.getElementById("round");
            const resultList = document.getElementById("result");

            round.textContent = "불러오는 중...";
            resultList.innerHTML = "<li>⏳ 데이터 불러오는 중...</li>";

            try {
                const response = await fetch("https://ladder-server-clean.up.railway.app/predict");
                const data = await response.json();

                round.textContent = data.예측회차 || "없음";

                resultList.innerHTML = "";

                if (data["앞기준 예측값"].length === 0) {
                    resultList.innerHTML = "<li class='error'>❌ 예측값 없음</li>";
                    return;
                }

                data["앞기준 예측값"].forEach(item => {
                    const li = document.createElement("li");
                    li.textContent = item;
                    resultList.appendChild(li);
                });

            } catch (error) {
                round.textContent = "예측 실패";
                resultList.innerHTML = "<li class='error'>❌ 네트워크 오류</li>";
            }
        }

        // 자동 실행
        fetchPrediction();
    </script>
</body>
</html>
