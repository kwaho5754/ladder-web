<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>사다리 예측 결과 (정방향 기반)</title>
</head>
<body>
    <h2>사다리 예측 결과</h2>
    <h3 id="round-info">예측 회차: 불러오는 중...</h3>

    <h4>▶ 정방향 블럭 기준 (가중치 Top3)</h4>
    <ul id="forward-list"><li>불러오는 중...</li></ul>

    <h4>▶ 정방향 대칭 블럭 기준 (가중치 Top3)</h4>
    <ul id="forward-mirror-list"><li>불러오는 중...</li></ul>

    <script>
        fetch('https://ladder-server-clean-production.up.railway.app/predict')
            .then(res => res.json())
            .then(data => {
                document.getElementById('round-info').textContent = `예측 회차: ${data['예측회차']}회`;

                function render(listId, topList) {
                    const ul = document.getElementById(listId);
                    ul.innerHTML = '';
                    topList.forEach((item, index) => {
                        const li = document.createElement('li');
                        li.textContent = `${index + 1}위: ${item.value} (점수: ${item.score})`;
                        ul.appendChild(li);
                    });
                }

                render('forward-list', data['정방향 Top3'] || []);
                render('forward-mirror-list', data['정방향 대칭 Top3'] || []);
            })
            .catch(err => {
                document.getElementById('round-info').textContent = '예측 회차: 에러';
                ['forward-list', 'forward-mirror-list'].forEach(id => {
                    document.getElementById(id).innerHTML = '<li>서버 오류</li>';
                });
            });
    </script>
</body>
</html>
